<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="egovframework.example.auth.service.impl.MemberMapper">
	<!-- id="메소드명",parameterType="매개변수자료형",resultType="return자료형"  -->

	<select id="authenticate"
			parameterType="MemberVO"
			resultType="MemberVO">
		SELECT * FROM USERS
		WHERE USER_ID=#{userid}		
	</select>

	
    <insert id="register"
			parameterType="MemberVO"
	>
		INSERT INTO USERS(USER_ID,PASSWORD,USERNAME,PHONE_NUM,EMAIL,ROLE,USER_CREATED_AT,NICKNAME)
		VALUES(#{userid},#{password},#{username},#{phonenum},#{email},'user'
		                    ,TO_CHAR(SYSDATE,'YYYY-MM-DD'),#{nickname})		
	</insert>	
	
		<select id="findId"
			parameterType="MemberVO"
			resultType="String">
		SELECT USER_ID FROM USERS
		WHERE USERNAME=#{username} AND PHONE_NUM = #{phonenum}		
	</select>
	
	<select id="findPassword"
			parameterType="MemberVO"
			resultType="MemberVO">
		SELECT USER_ID,username, phone_num FROM USERS
		WHERE USER_ID=#{userid} AND USERNAME=#{username} AND PHONE_NUM = #{phonenum}		
	</select>
	
	<update id="updatePassword"
			parameterType="MemberVO">
		UPDATE USERS
		SET PASSWORD=#{password}
		WHERE USER_ID=#{userid}
	</update>
	
</mapper>

